2025-10-26 13:34:30.184 +01:00 [INF] User profile is available. Using 'C:\Users\stian\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-26 13:34:30.265 +01:00 [INF] Now listening on: http://localhost:5257
2025-10-26 13:34:30.269 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-26 13:34:30.270 +01:00 [INF] Hosting environment: Development
2025-10-26 13:34:30.271 +01:00 [INF] Content root path: C:\Users\stian\Documents\IT\DAVE3625\health-app\HealthApp
2025-10-26 13:34:32.015 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/ - null null
2025-10-26 13:34:32.089 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.HomeController.Index (HealthApp)'
2025-10-26 13:34:32.134 +01:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller HealthApp.Controllers.HomeController (HealthApp).
2025-10-26 13:34:32.149 +01:00 [INF] Executing ViewResult, running view Index.
2025-10-26 13:34:32.200 +01:00 [INF] Executed ViewResult - view Index executed in 53.426ms.
2025-10-26 13:34:32.204 +01:00 [INF] Executed action HealthApp.Controllers.HomeController.Index (HealthApp) in 69.1855ms
2025-10-26 13:34:32.205 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.HomeController.Index (HealthApp)'
2025-10-26 13:34:32.207 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/ - 200 null text/html; charset=utf-8 195.5267ms
2025-10-26 13:34:34.012 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Calendar - null null
2025-10-26 13:34:34.014 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:34:34.025 +01:00 [INF] Route matched with {action = "Calendar", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(System.Nullable`1[System.Int32], System.Nullable`1[System.Int32]) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:34:34.551 +01:00 [INF] This is an information messeage
2025-10-26 13:34:34.555 +01:00 [WRN] This is a warning message
2025-10-26 13:34:34.556 +01:00 [ERR] This is an error message
2025-10-26 13:34:34.869 +01:00 [INF] Executing ViewResult, running view Calendar.
2025-10-26 13:34:34.905 +01:00 [INF] Executed ViewResult - view Calendar executed in 37.9246ms.
2025-10-26 13:34:34.905 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Calendar (HealthApp) in 880.2119ms
2025-10-26 13:34:34.905 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:34:34.914 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Calendar - 200 null text/html; charset=utf-8 902.7975ms
2025-10-26 13:34:36.374 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Create - null null
2025-10-26 13:34:36.378 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:34:36.384 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:34:36.422 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:34:36.489 +01:00 [INF] Executed ViewResult - view Create executed in 67.6053ms.
2025-10-26 13:34:36.489 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 104.7136ms
2025-10-26 13:34:36.489 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:34:36.489 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 115.5558ms
2025-10-26 13:35:03.102 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Calendar - null null
2025-10-26 13:35:03.103 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:35:03.104 +01:00 [INF] Route matched with {action = "Calendar", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(System.Nullable`1[System.Int32], System.Nullable`1[System.Int32]) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:03.201 +01:00 [INF] This is an information messeage
2025-10-26 13:35:03.202 +01:00 [WRN] This is a warning message
2025-10-26 13:35:03.203 +01:00 [ERR] This is an error message
2025-10-26 13:35:03.213 +01:00 [INF] Executing ViewResult, running view Calendar.
2025-10-26 13:35:03.215 +01:00 [INF] Executed ViewResult - view Calendar executed in 2.484ms.
2025-10-26 13:35:03.216 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Calendar (HealthApp) in 111.8897ms
2025-10-26 13:35:03.216 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:35:03.216 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Calendar - 200 null text/html; charset=utf-8 114.0421ms
2025-10-26 13:35:06.183 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Create - null null
2025-10-26 13:35:06.184 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:06.184 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:06.187 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:06.197 +01:00 [INF] Executed ViewResult - view Create executed in 9.4979ms.
2025-10-26 13:35:06.197 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 13.0849ms
2025-10-26 13:35:06.197 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:06.198 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 14.1918ms
2025-10-26 13:35:13.863 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 294
2025-10-26 13:35:13.865 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:13.887 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:14.103 +01:00 [INF] Executing RedirectResult, redirecting to /Booking/Calendar.
2025-10-26 13:35:14.103 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 215.6863ms
2025-10-26 13:35:14.103 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:14.104 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 302 0 null 240.6795ms
2025-10-26 13:35:14.110 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Calendar - null null
2025-10-26 13:35:14.110 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:35:14.111 +01:00 [INF] Route matched with {action = "Calendar", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Calendar(System.Nullable`1[System.Int32], System.Nullable`1[System.Int32]) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:14.113 +01:00 [INF] This is an information messeage
2025-10-26 13:35:14.114 +01:00 [WRN] This is a warning message
2025-10-26 13:35:14.114 +01:00 [ERR] This is an error message
2025-10-26 13:35:14.117 +01:00 [INF] Executing ViewResult, running view Calendar.
2025-10-26 13:35:14.120 +01:00 [INF] Executed ViewResult - view Calendar executed in 3.8501ms.
2025-10-26 13:35:14.121 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Calendar (HealthApp) in 10.0397ms
2025-10-26 13:35:14.121 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Calendar (HealthApp)'
2025-10-26 13:35:14.121 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Calendar - 200 null text/html; charset=utf-8 11.1065ms
2025-10-26 13:35:21.567 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/Booking/Create - null null
2025-10-26 13:35:21.568 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:21.568 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Create() on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:21.573 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:21.577 +01:00 [INF] Executed ViewResult - view Create executed in 4.105ms.
2025-10-26 13:35:21.577 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 9.4977ms
2025-10-26 13:35:21.578 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:21.579 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 10.8864ms
2025-10-26 13:35:35.599 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:35.599 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:35.600 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:35.632 +01:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:35.681 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:35.691 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:35.694 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:35.694 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:35.696 +01:00 [INF] Executed ViewResult - view Create executed in 1.9761ms.
2025-10-26 13:35:35.696 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 96.6405ms
2025-10-26 13:35:35.696 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:35.697 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 98.0354ms
2025-10-26 13:35:38.073 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:38.074 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:38.074 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:38.081 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:38.094 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:38.096 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:38.097 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:38.097 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:38.103 +01:00 [INF] Executed ViewResult - view Create executed in 6.4095ms.
2025-10-26 13:35:38.103 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 28.9403ms
2025-10-26 13:35:38.104 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:38.104 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 30.5223ms
2025-10-26 13:35:39.122 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:39.123 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:39.124 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:39.134 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:39.147 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:39.155 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:39.157 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:39.157 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:39.160 +01:00 [INF] Executed ViewResult - view Create executed in 3.5877ms.
2025-10-26 13:35:39.161 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 36.9392ms
2025-10-26 13:35:39.161 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:39.162 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 39.6438ms
2025-10-26 13:35:39.942 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:39.943 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:39.944 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:39.955 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:39.989 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:39.991 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:39.991 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:39.992 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:39.993 +01:00 [INF] Executed ViewResult - view Create executed in 1.2526ms.
2025-10-26 13:35:39.993 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 49.1315ms
2025-10-26 13:35:39.993 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:39.993 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 51.3877ms
2025-10-26 13:35:43.422 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:43.423 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:43.423 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:43.443 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:43.459 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:43.466 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:43.470 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:43.470 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:43.472 +01:00 [INF] Executed ViewResult - view Create executed in 1.5808ms.
2025-10-26 13:35:43.472 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 49.2312ms
2025-10-26 13:35:43.472 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:43.473 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 50.7604ms
2025-10-26 13:35:46.664 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-26 13:35:46.666 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 2.2377ms
2025-10-26 13:35:46.668 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-26 13:35:49.442 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:49.442 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:49.443 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:49.448 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:49.455 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:49.458 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:49.460 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:49.460 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:49.462 +01:00 [INF] Executed ViewResult - view Create executed in 1.921ms.
2025-10-26 13:35:49.462 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 19.3148ms
2025-10-26 13:35:49.462 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:49.462 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 20.3056ms
2025-10-26 13:35:49.525 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-26 13:35:49.527 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 1.1953ms
2025-10-26 13:35:49.527 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-26 13:35:52.260 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5257/Booking/Create - application/x-www-form-urlencoded 312
2025-10-26 13:35:52.261 +01:00 [INF] Executing endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:52.261 +01:00 [INF] Route matched with {action = "Create", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(HealthApp.Models.Booking) on controller HealthApp.Controllers.BookingController (HealthApp).
2025-10-26 13:35:52.271 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (Size = 6), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Bookings" ("Date", "Description", "EmployeeId", "PatientId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "BookingId";
2025-10-26 13:35:52.288 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'HealthApp.DAL.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-26 13:35:52.300 +01:00 [ERR] [BookingRepository] booking creation failed for booking {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}, error message: An error occurred while saving the entity changes. See the inner exception for details.
2025-10-26 13:35:52.301 +01:00 [WRN] [BookingController] Booking creation failed {"BookingId":0,"Description":"Pottis","Date":"2025-03-11T11:30:00.0000000","PatientId":2,"Patient":null,"EmployeeId":2,"Employee":null,"$type":"Booking"}
2025-10-26 13:35:52.301 +01:00 [INF] Executing ViewResult, running view Create.
2025-10-26 13:35:52.311 +01:00 [INF] Executed ViewResult - view Create executed in 8.8233ms.
2025-10-26 13:35:52.311 +01:00 [INF] Executed action HealthApp.Controllers.BookingController.Create (HealthApp) in 49.3541ms
2025-10-26 13:35:52.311 +01:00 [INF] Executed endpoint 'HealthApp.Controllers.BookingController.Create (HealthApp)'
2025-10-26 13:35:52.314 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5257/Booking/Create - 200 null text/html; charset=utf-8 53.2432ms
2025-10-26 13:35:52.362 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - null null
2025-10-26 13:35:52.363 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 0.4894ms
2025-10-26 13:35:52.363 +01:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5257/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-10-26 13:36:48.047 +01:00 [INF] Application is shutting down...
